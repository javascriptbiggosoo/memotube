import{u as l}from"./useQuery-CKv_ta2w.js";import{A as o,D as a,E as c}from"./index-Bcvv3-rq.js";const d=async t=>(await o.post("/posts",t)).data,w=async(t,e)=>(await o.get(`/posts?page=${t}&limit=${e}`)).data,m=async t=>(await o.get(`/posts/${t}`)).data,P=async t=>(await o.delete(`/posts/${t}`)).data,f=async t=>(await o.post(`/posts/${t}/like`)).data,k=async t=>(await o.post(`/posts/${t}/unlike`)).data,g=t=>{const{data:e}=l({queryKey:["post",t],queryFn:m.bind(null,t),staleTime:0,refetchOnWindowFocus:!0}),{mutate:n}=a({mutationFn:s=>P(s),onSuccess:()=>{c.invalidateQueries(["posts"])}}),r=s=>{n(s)},{mutate:i}=a({mutationFn:s=>f(s),onSuccess:()=>{c.invalidateQueries(["post",t])}}),{mutate:u}=a({mutationFn:s=>k(s),onSuccess:()=>{c.invalidateQueries(["post",t])}});return{postData:e,deletePost:r,toggleLike:s=>{s?u(t):i(t)}}},F=()=>{const{mutate:t}=a({mutationFn:n=>d(n),onSuccess:()=>{c.invalidateQueries(["posts"])}});return{addPost:({mylistItem:n,title:r,author:i,category:u})=>{const p={id:crypto.randomUUID(),thumbnail:n.thumbnail,title:r,content:n.content,author:i,category:u,likes:{likeCount:0,likedUser:[]},createdAt:new Date().getTime()};t(p)}}};export{g as a,w as f,F as u};
