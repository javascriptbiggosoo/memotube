import{u as p}from"./useQuery-BO4Vchqz.js";import{A as d,D as o,E as a,G as c}from"./index-C4nHmQWu.js";const m=async t=>(await o.post("/posts",t)).data,w=async(t,e)=>{console.log(d+`/posts?page=${t}&limit=${e}`);const s=await o.get(`/posts?page=${t}&limit=${e}`);return console.log(s),s.data},P=async t=>(await o.get(`/posts/${t}`)).data,f=async t=>(await o.delete(`/posts/${t}`)).data,k=async t=>(await o.post(`/posts/${t}/like`)).data,y=async t=>(await o.post(`/posts/${t}/unlike`)).data,$=t=>{const{data:e}=p({queryKey:["post",t],queryFn:P.bind(null,t),staleTime:0,refetchOnWindowFocus:!0}),{mutate:s}=a({mutationFn:n=>f(n),onSuccess:()=>{c.invalidateQueries(["posts"])}}),i=n=>{s(n)},{mutate:r}=a({mutationFn:n=>k(n),onSuccess:()=>{c.invalidateQueries(["post",t])}}),{mutate:u}=a({mutationFn:n=>y(n),onSuccess:()=>{c.invalidateQueries(["post",t])}});return{postData:e,deletePost:i,toggleLike:n=>{n?u(t):r(t)}}},F=()=>{const{mutate:t}=a({mutationFn:s=>m(s),onSuccess:()=>{c.invalidateQueries(["posts"])}});return{addPost:({mylistItem:s,title:i,author:r,category:u})=>{const l={id:crypto.randomUUID(),thumbnail:s.thumbnail,title:i,content:s.content,author:r,category:u,likes:{likeCount:0,likedUser:[]},createdAt:new Date().getTime()};t(l)}}};export{$ as a,w as f,F as u};
