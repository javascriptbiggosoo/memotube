import{u as l}from"./useQuery-uACKp_j4.js";import{A as n,D as a,E as c}from"./index-Cwl5Gj8k.js";const d=async t=>(await n.post("/posts",t)).data,h=async(t,e)=>(console.log(`https://memotube-fc8yz87s6-javascriptbiggosoos-projects.vercel.app/posts?page=${t}&limit=${e}`),(await n.get(`/posts?page=${t}&limit=${e}`)).data),m=async t=>(await n.get(`/posts/${t}`)).data,f=async t=>(await n.delete(`/posts/${t}`)).data,y=async t=>(await n.post(`/posts/${t}/like`)).data,P=async t=>(await n.post(`/posts/${t}/unlike`)).data,w=t=>{const{data:e}=l({queryKey:["post",t],queryFn:m.bind(null,t),staleTime:0,refetchOnWindowFocus:!0}),{mutate:o}=a({mutationFn:s=>f(s),onSuccess:()=>{c.invalidateQueries(["posts"])}}),r=s=>{o(s)},{mutate:i}=a({mutationFn:s=>y(s),onSuccess:()=>{c.invalidateQueries(["post",t])}}),{mutate:u}=a({mutationFn:s=>P(s),onSuccess:()=>{c.invalidateQueries(["post",t])}});return{postData:e,deletePost:r,toggleLike:s=>{s?u(t):i(t)}}},$=()=>{const{mutate:t}=a({mutationFn:o=>d(o),onSuccess:()=>{c.invalidateQueries(["posts"])}});return{addPost:({mylistItem:o,title:r,author:i,category:u})=>{const p={id:crypto.randomUUID(),thumbnail:o.thumbnail,title:r,content:o.content,author:i,category:u,likes:{likeCount:0,likedUser:[]},createdAt:new Date().getTime()};t(p)}}};export{w as a,h as f,$ as u};
