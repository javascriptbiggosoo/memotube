import{u as l}from"./useQuery-BAzWhmvr.js";import{A as n,D as a,E as c}from"./index-CiJ1Lp8P.js";const d=async t=>(await n.post("/posts",t)).data,h=async(t,e)=>{console.log(`https://memotube-fc8yz87s6-javascriptbiggosoos-projects.vercel.app/posts?page=${t}&limit=${e}`);const s=await n.get(`/posts?page=${t}&limit=${e}`);return console.log(s),s.data},m=async t=>(await n.get(`/posts/${t}`)).data,f=async t=>(await n.delete(`/posts/${t}`)).data,g=async t=>(await n.post(`/posts/${t}/like`)).data,y=async t=>(await n.post(`/posts/${t}/unlike`)).data,w=t=>{const{data:e}=l({queryKey:["post",t],queryFn:m.bind(null,t),staleTime:0,refetchOnWindowFocus:!0}),{mutate:s}=a({mutationFn:o=>f(o),onSuccess:()=>{c.invalidateQueries(["posts"])}}),r=o=>{s(o)},{mutate:i}=a({mutationFn:o=>g(o),onSuccess:()=>{c.invalidateQueries(["post",t])}}),{mutate:u}=a({mutationFn:o=>y(o),onSuccess:()=>{c.invalidateQueries(["post",t])}});return{postData:e,deletePost:r,toggleLike:o=>{o?u(t):i(t)}}},$=()=>{const{mutate:t}=a({mutationFn:s=>d(s),onSuccess:()=>{c.invalidateQueries(["posts"])}});return{addPost:({mylistItem:s,title:r,author:i,category:u})=>{const p={id:crypto.randomUUID(),thumbnail:s.thumbnail,title:r,content:s.content,author:i,category:u,likes:{likeCount:0,likedUser:[]},createdAt:new Date().getTime()};t(p)}}};export{w as a,h as f,$ as u};
